#const n = 
#hide.
#show occurs/2.
#show holds/2.
state(0..n-1).

%===============================================================================
%                                    FLUENTS
%===============================================================================
fluent(actorAt(A,L)) :- actor(A), location(L).
fluent(have(A,O)) :- actor(A), object(O).
fluent(dead(A)) :- actor(A).


%===============================================================================
%                                    ACTIONS
%===============================================================================
action(die(A)) :- actor(A).


%===============================================================================
%                                 INITIAL STATE
%===============================================================================
holds(0,actorAt(A,L)) :- actor(A), location(L), on(A,L).
holds(0,have(A,O)) :- actor(A), object(O), on(O,A).


%===============================================================================
%                                ACTION GENERATOR
%=============================================================================== 
 occurs(N,A) :- not -occurs(N,A), state(N), action(A).
-occurs(N,B) :- occurs(N,A), state(N), action(A), action(B), A!=B.


%===============================================================================
%                                    INERTIA
%===============================================================================
 holds(N+1,F) :-  holds(N,F), not -holds(N+1,F), state(N), fluent(F).
-holds(N+1,F) :- -holds(N,F), not  holds(N+1,F), state(N), fluent(F).


%===============================================================================
%                                 EXECUTABILITY
%===============================================================================


%===============================================================================
%                              ACTIONS DESCRIPTION
%===============================================================================
holds(N+1, dead(A)) :- occurs(N, die(A)), state(N). 


%===============================================================================
%                                     GOAL
%===============================================================================
goal :- holds(n,dead(A)), dispatcher(A).   
:- not goal.
